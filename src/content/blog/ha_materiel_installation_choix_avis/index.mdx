---
draft: true
title: Home Assistant - Mon avis/experience sur le choix du materiel et du type d'installation
description: "Perdu dans le choix du materiels ou du type d'installation pour vous lancer dans Home Assistant ? Je vais vous faire part de mon experience pour essayer de vous orientez vers la solution reunissant simplicité et cout reduit."
pubDate: 02/20/2024
heroImage: './ha_installations_avis.png'
categories: 
- Home Assistant
- Domotique
authors: 
- mcfly
tags:
- Installation
- HAOS
- HA supervised
- Ha container
- HA Core
- Home Assistant Yellow
- Home Assistant Green
- Raspnerry Pi
- NUC
- NAS
- VM
---

Je vois passer beaucoup de question sur le materiel a choisir ou le type d'installation pour commencer avec Home Assistant. Sachez qu'il n'y a pas de solution universelle, mais elle peut etre orienté en fonction :
* De vos connaissances en domotique, 
* De vos connaissances en informatique, 
* Du materiel déja disponnible,
* Des objectifs qu vous aimeriez atteindre avec votre domotique,
* Du temps que vous souhaitez consacrer a la domotique elle meme,
* Du temps que vous souhaitez consacrer a la gestion technique de celle-ci.

Avant de vous faire des profils types, je vais vous parler des differents types d'installation existant pour Home Asisstant.

## Types d'installation
Home Assistant se decline en plusieurs versions, quatre pour être exacte :
* ***HAOS** (Home Assistant Operating System) :* Installation complete de Home Assistant avec son systeme d'exploitation.
* ***HA Container** :* Installation autonome de Home Assistant Core dans un conteneur (par exemple, Docker).
* ***HA Core** :* Installation manuelle à l'aide de l'environnement virtuel Python.
* ***HA Supervised** :* Installation manuelle de Home Assistant et du Supervisor.

Je ne vais pas rentrer dans les details de ces installations mais **HAOS** est **clairement recommandé** pour les débutants et **HA Container** peut etre utilisé pour ceux **connaissant** déja le monde de la **containerisation**. **HA Core** est prevu pour les **utilisateurs avancés**.

Retenez quand même que HAOS est un syteme d'exploitation avec Home Assistant d'installé, ce qui veut dire que les **mises a jour du systeme et de Home Assistant** se feront en un clique **via l'interface** de Home Assistant.
Pour la version HA Container, c'est a vous de gérer le systeme d'exploitation ainsi que le systeme de containerisation (mise a jour, etc).
La version HA Supervised permet d'avoir tous les avantages de Home Assistant OS **MAIS** il faudra gérer le systeme acceuillant son installation (cas de l'installation en [VM comme dans Proxmox](/blog/ha_haos_proxmox_installation/) ou sur un NAS).

Je vous laisse le tableau officiel des differentes version de Home Assistant anisi que leur avantages.

![Tableau comparatif des types d'installation de Home Assistant](./img/tableau_types_installation_home_assistant.png)

## Le Hardware
Passons a la partie Hardaware (materiel), qui peu etre tout aussi compliqué. 

### Raspberry Pi
Le Raspberry a longtemps été la réference pour tous les systemes domotique (Jeedom, Domoticz, Gladys, Home Assistant) mais pour Home Assistant, ce dernier posait des problemes de corruption de carte SD lié a la forte ecriture des donnees sur cette derniere. Home Assistant a donc réglé le probleme en pouvant déporter tout ce qui est lié aux données sur un support externe tout en gardant le systeme brut sur la carte micro SD pour conserver la rapidité d'execution et de démarrage.

Home Assistant est comptible Raspberry Pi 3 et 4 en version stable mais aussi 5 en bêta au moment ou j'ecris ces lignes.

Pour une installation en production sans ce poser de question, il faudra lui ajouter un support de stockage externe, une bonne alimentation, et pour le coté estetique (et pour la poussiere), un boitier. Tous ces achats supplementaires font monter la facture a plus de 150 euros.

De plus, vous serez limité dans le temps car il est peu evolutif.

**Mon avis** En 2024, le Raspberry implique trop d'investissement tout en limitant les possibles evolutions. Achat de la Raspberry Pi avec au moins 4 voir 8Go de RAM, l'alimentation, la carte Micro SD, un support SSD ou M.2 externe et d'un boitier (ou un boitier avec support M.2 ou SSD intégré) et parfois, une rallonge et un Hub pour alimenter le materiel USB afin qu'il puisse beneficier d'une alimentation correcte.

***Note :** Le Raspberry Pi 5 actuellement en version béta, apportera quelques ameliorations grace a l'ajout d'un port PCi M.2 n'obligeant plus l'ajout d'un disque externe en USB et faisant disparaitre en natif les problemes de carte MicroSD. Reste que son prix est relativement élevé pour un kit complet Alimentation, boitier, disque M.2 ([entre 150/200 euros sur Amazon](https://amzn.to/3T4jtkZ))*

### Box Home Assistant
*Quoi de mieux qu'une box créé pour et par Home Assistant*
Home Assistant s'est mis a vendre ses propres machines a base d'Odroid pour le Home Assistant Blue (plus disponnible) ou de Raspberry Pi au format CM pour le [Yellow](https://www.home-assistant.io/yellow) incluant aussi une puce Zigbee compatible Matter et le [Home Assistant Green](https://www.home-assistant.io/green).
Ces machines peuvent etre un bon point de départ, mais ne se trouvent pas sur le marché francais de maniere officielle.

### Odroid
Home Assistant est aussi compatible avec les Odroid N2+, C4, M1 qui sont des alternatives au Raspberry Pi mais avec du stockage en NVME par défaut en plus d'autres options.

### autres
Home Assistant se veut compatible avec toutes sorte d'installation comme une installtion sur des machines generique x86/64bits [tutoriel ici]](/blog/ha_haos_generic_x86-64_installation/), mais aussi des NUC, NAS (en containeur ou en VM) ce qui vous permet vraiment de trouver chaussure a votre pied.

## Les profils utilisateurs
***Note :** Ces profils ont été établis par moi meme et n'engage que moi et mon experience. J'essaie de repondre a plusieurs cas de figure en me mettant a la place du débutant que j'ai été et a l'utilisateur bidouilleur que je suis, je ne suis aucunement un professionnel de l'informatique ou un geek acharné. Chacun devra donc faire en fonction de ses bagages*

### Profil Débutant
*Pour les débutants se lancant dans la domotique en partant de zéro ou utilisant actuellement les applications proprietaires voulant juste profiter de la domotique sans se prendre la tete avec le technique.*

Pour ces personnes je recommande l'utilisation de Home Assistant OS (HAOS) pour que vous puissiez vous concentrer sur la domotique et seulement sur celle ci. Le materiel adéquate peut etre une des solutions Home Assistant clé en main (Green, Yellow), un Raspberry, un Odroid ou un NUC ou un mini PC (HP Elite Desk ou Lenovo).

Si vous devez investir dans du materiel et que vous souhaitez faire evoluer votre domotique dans le futur avec de la Vidéosureveillance par exemple, partez directement vers un mini PC, sinon prenez u NUC ou un Odroid/Raspberry.

#### Solution clé en main
* HA Green/ Yellow*
**Avantages**
* Carte, alimentation, boitier et stockage intégré,
* Faible consommation (<10w),
* Vous n'avez rien a faire, plug and play (je crois que le systeme est déja installé),
* Le Yellow integre le Zigbee et Matter,
* Faible encombrement,
* Ventilation passive,
* Gestion des mises a jour de Home Assistant et de l'OS depuis l'interface utilisateur de Home Assistant.

**Inconvenients** 
* Pas d'évolution possible,
* Indisponible en France.
* Vidéosurveillance limité (Utilisation de clé Coral USB possible),
* Limitation dans l'utilisation des add-ons et/ou services (memoire RAM).

#### Solution Raspberry, Odroid
**Avantages**
* Faible consommation (<10w),
* Installation facile ([Tutoriel ici](/blog/ha_haos_installation/),
* Gestion des mises a jour de Home Assistant et de l'OS depuis l'interface utilisateur de Home Assistant.
* *Ventillation passive **ou** active.

**Inconvenients**
* Achat en sus du boitier, de l'alimentation, d'un disque externe et son boitier (pour certains),
* Coût plus élevé,
* Pas d'évolution possible,
* Un peu plus encombrant (disque externe, Hub USB alimenté)
* Vidéosurveillance limité (Utilisation de clé Coral USB possible),
* Limitation dans l'utilisation des add-ons et/ou services (memoire RAM).

#### Solution NUC, Mini PC
**Avantages**
* Faible consommation (<15w),
* Installation facile ([Tutoriel ici](/blog/ha_haos_generic_x86-64_installation/),
* Gestion des mises a jour de Home Assistant et de l'OS depuis l'interface utilisateur de Home Assistant.
* Evolution possible,
* Puissance et memoire bien plus grande,
* Pas ou peu de limitation dans l'utilisation des add-ons et/ou services,
* Vidéosureveillance (possibilité d'ajouter une clé Coral en PCie).
* *Possibilité de passer sur une installation virtualisée (Proxmox) plus tard*

**Inconvenients**
* Matériel un peu plus encombrent (mais reste assez discret),
* Ventilation souvent active,
* Chargeur plus imposant.

### Profil Intermediare
Pour les personnes ayant déja un peu de bagage informatique mais débutant en domotique et/ou Home Assistant. Souhaitant continuer a bidouiller en parallele de leur version de production et voulant aussi maximiser l'utilisation de leur machine pour y heberger d'autres services non lié a la domotique.

Pour cela, je leur recommande le passage sur un mini PC avec Proxmox dessus, permettant d'avoir une machine virtuelle dédié a Home Assistant de production et de bidouiller sur une autre.

#### Solution NUC, Mini PC avec Proxmox et HAOS
**Avantages**
* Faible consommation (<15w),
* Installation de Proxmox pour faire de la virtualisation ou du containeur ([Tutoriel ici](/blog/proxmox_installation/))
* Installation de Home Assistant sur Proxmox facile ([Tutoriel ici](/blog/ha_haos_generic_x86-64_installation/)),
* Gestion des mises a jour de Home Assistant et de l'OS depuis l'interface utilisateur de Home Assistant.
* Evolution possible,
* Puissance et memoire ajustable,
* Pas ou peu de limitation dans l'utilisation des add-ons et/ou services,
* Vidéosureveillance (possibilité d'ajouter une clé Coral en PCie).

**Inconvenients**
* Gestion des mises a jour du systeme (Proxmox) a effectuer vous même,
* Matériel un peu plus encombrent (mais reste assez discret),
* Ventilation souvent active,
* Chargeur plus imposant.

#### Solution NUC, Mini PC avec Docker
**Avantages**
* Faible consommation (<15w),
* Installation de Home Assistant Container
* Evolution possible,
* Puissance et memoire ajustable,
* Hebergement d'autres services en docker.

**Inconvenients**
* Gestion des mises a jour du systeme a effectuer vous même,
* Gestion des mises a jour de Home Assistant a effectuer vous même,
* Pas de superviseur,
* Gestion des Add-ons en externe (sous docker par exemple. A vous de faire les liaisons)
* Gestion des sauvegarde de Home Assistant en manuelle,
* Vidéosureveillance en externe (possibilité d'ajouter une clé Coral en PCie),
* Matériel un peu plus encombrent (mais reste assez discret),
* Ventilation souvent active,
* Chargeur plus imposant.

#### Solution NAS
**NAS DIY**

J'ai un NAS DIY sous OpenMediaVault sur lequel il est possible de d'installer des containeurs docker. Pour ma part et pour optimiser au maximum ma consommation éléctrique, mon NAS DIY 4 baies (environ40/50w) est eteint une grande majorité du temps et donc ne peut heberger ma solution domotique. 
Je n'ai donc pas testé cette solution, mais je ne vois pas de probleme pouvant empecher cette possibilité.

**NAS grand plublic** 

Idem je n'ai pas de NAS grand public chez moi, mais je sais que certaines gamme de Synology ou QNAP autorisent les VMs ou la containeurisation, il est donc possible d'installer Home Assistant dans une de ces version, cependant cela ajoute de la complexité que je ne peux evalué personnelelement mais qui a déja fait de nombreux retour sur les forums (gestion des clés USB par exemple).

## Conclusion

J'espere que cet article, vous a eclairé un peu sur le materiel disponnible mais aussi les differentes installation de Home Assistant.

J'aimerais juste que vous ayez en tete que si vous débutez en omotique allez vers la solution la plus simple techniquemet car sinon vous allez perdre de l'energie dans la gestion tehnique au lieu de la consacrer a comprendre et avancé dans la domotique. Il ne sera jamais trop tard pour changer techniquement une fois des bases solides en domotique acquises.

Pour ce qui concerne le fait de centraliser ou pas tous ces services au meme endroits ou alors de mettre tou dans des VMs séparré, il y urait possibilité d'en débattre pendant des longues heures. Retenez qu'il est plus facile de n'avoir qu'uns seul systeme a gerer (mise ajour etc) plustotu que d'en avoir plussieurs et de ne pas les tenir a jour.

